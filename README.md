# "DecRep" 

Приложение, позволяющее обмениваться файлами в реальном времени. 
Пользователь с одного компьютера может увидеть папки и файлы, которыми делятся другие компьютеры. 
---

## Основной функционал

- Манипуляции с файлами
  - Добавление / удаление файлов для отслеживания  
  - Обновление локальной версии при изменении в другой копии репозитория
- Поиск копий репозитория в локальной сети
- CLI интерфейс для просмотра файловой структуры
- Синхронизация локальных копий репозиториев при изменении файла
- Шифрование и сжатие передаваемых файлов
- Многопоточная передача данных

---

## Технологический стек
- **Язык**: С++20
- **База данных**: PostgreSQL 14.18
- **Сборка**: CMake 3.20+ 
- **Библиотеки**:
  - Boost 1.87
  - OpenSSL 3.5.0
  - efsw 1.4.1 
  - pqxx 6.4.5
  - zlib 1.3.1
  - GTest 1.17.0 (для мок-тестов)

---

## Структура проекта

Наш проект использует модель P2P (peer-to-peer), где каждое устройство является равноправным узлом.

**1. Соединение клиентов**

Когда два устройства хотят синхронизировать файлы, они сначала должны найти друг друга и установить соединение.

**2. Поиск устройств**

Возможные варианты для поиска устройств:
- Локальное обнаружение (UDP):
  - Отправка UDP-пакетов в локальную сеть для поиска узлов.
  - Работает автоматически, если устройства находятся в одной сети.

- Глобальное обнаружение (мысли о будущем):
  -  Если устройства не в одной сети, они могут зарегистрироваться на общедоступном сервере.
  -  Устройство сообщает свой идентификатор, помогающий его найти.

**3. Синхронизация данных**

Когда соединение установлено, мы используем внешние запросы для проверки актуальности базы данных и bittorrent протокол для загрузки обновленных данных.

Устройства обмениваются индексами файлов. Если один узел обнаруживает, что у него устаревшая версия файла, то он запрашивает обновление.
Передача файлов осуществляется с помощью https-протокола.
Обновление базы данных и другие запросы с помощью http-протокола


---

## Quick start
1. Склонируйте репозиторий:
   ```bash
   git clone https://github.com/Timentil/DecRep/tree/main
   mkdir build && cd build
   ```
2. Обновите путь в CMakeLists.txt до папки с efsw:
    ```
   list(APPEND CMAKE_PREFIX_PATH "/path/to/efsw")
    ```
3. Соберите проект:
   ```bash
   cmake .. 
   make 
   ```
---

## Тестирование

В CMakeLists.txt указан в качестве цели бинарник для тестирования.

1. Собрать проект по инструкции выше.

2. Запустить тесты:
    ```bash
    ./dec-rep-db_manager_test
    ```
---

## Лицензия

MIT License - [LICENSE](LICENSE)

---

## Участники
- [Артем Карпов](https://github.com/Timentil)
- [Диана Андроник](https://github.com/AndrDia)
- [Тимофей Устинов](https://github.com/timustinov)
